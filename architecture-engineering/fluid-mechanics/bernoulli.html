<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bernoulli's Equation Calculator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../assets/css/style.css">
</head>
<body class="theme-fluid">
  <header class="site-header">
    <div class="container">
      <p class="site-header__brand">Barrera Calculators</p>
      <p class="site-header__tagline">Fluid Mechanics Toolkit for <span>Architecture &amp; Engineering</span></p>
    </div>
  </header>

  <nav class="site-nav">
    <ul class="site-nav__list">
      <li><a class="site-nav__link" href="../../index.html">Home</a></li>
      <li><a class="site-nav__link" href="../../innovation-design/index.html">Science of Innovation &amp; Design</a></li>
      <li><a class="site-nav__link is-active" href="../index.html">Science of Architecture &amp; Engineering</a></li>
      <li><a class="site-nav__link" href="../../auto-sys-prgm/index.html">Engineering &amp; Auto Systems Programming</a></li>
      <li><a class="site-nav__link" href="../../misc./index.html">Misc.</a></li>
    </ul>
  </nav>

  <main>
    <section class="section">
      <div class="container">
        <div class="breadcrumb">
          <a href="../../index.html">Home</a> &gt;
          <a href="../index.html">Science of Architecture &amp; Engineering</a> &gt;
          <a href="index.html">Fluid Mechanics</a> &gt;
          Bernoulli's Equation
        </div>

        <div class="calculator-shell">
          <header class="module-header">
            <h1>Bernoulli's Equation Calculator</h1>
            <p class="subtitle">Enter known pressures, velocities, and elevations to solve for the missing state in a flowing fluid.</p>
          </header>

          <div class="instructions">
            Provide three of the four state properties below. The calculator applies Bernoulli's principle to determine the unknown quantity and summarizes the full energy balance.
          </div>

          <div class="calculator">
            <div class="input-section">
              <h3>State 1</h3>
              <div class="input-grid">
                <div class="input-field">
                  <label for="pressure1">Pressure P₁ (Pa)</label>
                  <input type="number" id="pressure1" step="any" placeholder="e.g. 101325">
                </div>
                <div class="input-field">
                  <label for="velocity1">Velocity V₁ (m/s)</label>
                  <input type="number" id="velocity1" step="any" placeholder="e.g. 3.2">
                </div>
                <div class="input-field">
                  <label for="height1">Elevation z₁ (m)</label>
                  <input type="number" id="height1" step="any" placeholder="e.g. 2.5">
                </div>
              </div>
            </div>

            <div class="input-section">
              <h3>State 2</h3>
              <div class="input-grid">
                <div class="input-field">
                  <label for="pressure2">Pressure P₂ (Pa)</label>
                  <input type="number" id="pressure2" step="any" placeholder="Leave blank to solve">
                </div>
                <div class="input-field">
                  <label for="velocity2">Velocity V₂ (m/s)</label>
                  <input type="number" id="velocity2" step="any" placeholder="Leave blank to solve">
                </div>
                <div class="input-field">
                  <label for="height2">Elevation z₂ (m)</label>
                  <input type="number" id="height2" step="any" placeholder="Leave blank to solve">
                </div>
              </div>
            </div>

            <div class="input-section">
              <h3>Fluid Properties</h3>
              <div class="input-grid">
                <div class="input-field">
                  <label for="density">Density ρ (kg/m³)</label>
                  <input type="number" id="density" step="any" value="1000">
                </div>
              </div>
            </div>

            <div class="button-group">
              <button class="btn-primary" onclick="solveBernoulli()">Calculate</button>
              <button class="btn-secondary" onclick="resetFields()">Reset</button>
            </div>

            <div class="results" id="results"></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <p>© Barrera Calculators — Fluid Mechanics Studio</p>
  </footer>

  <script>
    function solveBernoulli() {
      const P1 = parseFloat(document.getElementById('pressure1').value);
      const V1 = parseFloat(document.getElementById('velocity1').value);
      const z1 = parseFloat(document.getElementById('height1').value);
      const P2 = parseFloat(document.getElementById('pressure2').value);
      const V2 = parseFloat(document.getElementById('velocity2').value);
      const z2 = parseFloat(document.getElementById('height2').value);
      const rho = parseFloat(document.getElementById('density').value) || 1000;

      const known = [P1, V1, z1, P2, V2, z2].filter(v => !isNaN(v)).length;

      if (known < 5) {
        document.getElementById('results').innerHTML = '<div class="warning">Provide five of the six values to solve the remaining property.</div>';
        return;
      }

      const g = 9.81;
      let missingField = null;
      const fields = { pressure2: P2, velocity2: V2, height2: z2 };

      for (const [key, value] of Object.entries(fields)) {
        if (isNaN(value)) {
          missingField = key;
        }
      }

      let solvedValue = null;
      let steps = '';

      if (missingField === 'pressure2') {
        solvedValue = P1 + 0.5 * rho * (V1 ** 2 - V2 ** 2) + rho * g * (z1 - z2);
        steps = `<div class="step">P₂ = P₁ + ½ρ(V₁² − V₂²) + ρg(z₁ − z₂) = ${solvedValue.toFixed(2)} Pa</div>`;
      } else if (missingField === 'velocity2') {
        const energy = (P1 - P2) / rho + 0.5 * (V1 ** 2) + g * (z1 - z2);
        solvedValue = Math.sqrt(Math.max(0, 2 * energy));
        steps = `<div class="step">V₂ = √[2((P₁ − P₂)/ρ + ½V₁² + g(z₁ − z₂))] = ${solvedValue.toFixed(2)} m/s</div>`;
      } else if (missingField === 'height2') {
        solvedValue = z1 + (P1 - P2) / (rho * g) + (V1 ** 2 - V2 ** 2) / (2 * g);
        steps = `<div class="step">z₂ = z₁ + (P₁ − P₂)/(ρg) + (V₁² − V₂²)/(2g) = ${solvedValue.toFixed(2)} m</div>`;
      }

      document.getElementById('results').innerHTML = `
        <h2>Results</h2>
        <div class="result-grid">
          <div class="result-item">
            <div class="result-value">${(solvedValue ?? 0).toFixed(2)}</div>
            <div class="result-label">${missingField === 'pressure2' ? 'Pressure P₂ (Pa)' : missingField === 'velocity2' ? 'Velocity V₂ (m/s)' : 'Elevation z₂ (m)'}</div>
          </div>
        </div>
        <div class="steps">${steps}</div>
      `;
    }

    function resetFields() {
      ['pressure1','velocity1','height1','pressure2','velocity2','height2'].forEach(id => {
        document.getElementById(id).value = '';
        document.getElementById(id).classList.remove('error');
      });
      document.getElementById('density').value = 1000;
      document.getElementById('results').innerHTML = '';
    }
  </script>
</body>
</html>
